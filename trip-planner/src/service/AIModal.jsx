import { GoogleGenerativeAI } from "@google/generative-ai";

  
  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
  
    export const chatSession = model.startChat({
      generationConfig,
   
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate travel plan for location:America,for 3 days for couple with cheap budget, give me a hotels options list with hotel name, hotel address, price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with place name, place details, place image url, geo coordinates, ticket pricing, rating, time travel each of the location for 3 days with each day plan with best time to visit in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "I can't provide you with real-time information like hotel prices, availability, images, or ticket pricing. This information is constantly changing and requires access to live databases. \n\nHowever, I can give you a structured format and some example placeholders to help you build your own travel plan:\n\n```json\n{\n  \"destination\": \"America\",\n  \"travel_duration\": 3,\n  \"budget\": \"cheap\",\n  \"travelers\": \"couple\",\n  \"itinerary\": [\n    {\n      \"day\": 1,\n      \"theme\": \"City Exploration\",\n      \"locations\": [\n        {\n          \"name\": \"Central Park\",\n          \"details\": \"A famous park in the heart of Manhattan, offering scenic walks, picnics, and attractions like the Bethesda Terrace and Strawberry Fields.\",\n          \"image_url\": \"https://www.example.com/central_park.jpg\",\n          \"coordinates\": [40.7829, -73.9654],\n          \"ticket_pricing\": \"Free\",\n          \"rating\": 4.5,\n          \"time_spent\": \"3 hours\"\n        },\n        {\n          \"name\": \"Times Square\",\n          \"details\": \"A bustling intersection known for its bright lights, billboards, and Broadway theaters.\",\n          \"image_url\": \"https://www.example.com/times_square.jpg\",\n          \"coordinates\": [40.7580, -73.9855],\n          \"ticket_pricing\": \"N/A\",\n          \"rating\": 4,\n          \"time_spent\": \"2 hours\"\n        },\n        {\n          \"name\": \"Top of the Rock\",\n          \"details\": \"An observation deck offering panoramic views of the city skyline from the Rockefeller Center.\",\n          \"image_url\": \"https://www.example.com/top_of_the_rock.jpg\",\n          \"coordinates\": [40.7580, -73.9803],\n          \"ticket_pricing\": \"$35 (approx.)\",\n          \"rating\": 4.8,\n          \"time_spent\": \"1 hour\"\n        }\n      ],\n      \"best_time_to_visit\": \"Morning to avoid crowds\"\n    },\n    {\n      \"day\": 2,\n      \"theme\": \"Historical Sites & Culture\",\n      \"locations\": [\n        {\n          \"name\": \"Statue of Liberty\",\n          \"details\": \"A iconic symbol of freedom and democracy, accessible by ferry from Battery Park.\",\n          \"image_url\": \"https://www.example.com/statue_of_liberty.jpg\",\n          \"coordinates\": [40.6892, -74.0445],\n          \"ticket_pricing\": \"$30 (approx.)\",\n          \"rating\": 4.7,\n          \"time_spent\": \"3 hours\"\n        },\n        {\n          \"name\": \"Ellis Island\",\n          \"details\": \"A former immigration center that now houses a museum showcasing the stories of immigrants.\",\n          \"image_url\": \"https://www.example.com/ellis_island.jpg\",\n          \"coordinates\": [40.6892, -74.0445],\n          \"ticket_pricing\": \"Included with Statue of Liberty ferry\",\n          \"rating\": 4.5,\n          \"time_spent\": \"2 hours\"\n        },\n        {\n          \"name\": \"Brooklyn Bridge\",\n          \"details\": \"A historic suspension bridge connecting Manhattan and Brooklyn, offering scenic views and walking paths.\",\n          \"image_url\": \"https://www.example.com/brooklyn_bridge.jpg\",\n          \"coordinates\": [40.7057, -73.9961],\n          \"ticket_pricing\": \"Free\",\n          \"rating\": 4.8,\n          \"time_spent\": \"1 hour\"\n        }\n      ],\n      \"best_time_to_visit\": \"Afternoon to catch the sunset\"\n    },\n    {\n      \"day\": 3,\n      \"theme\": \"Shopping & Food\",\n      \"locations\": [\n        {\n          \"name\": \"SoHo\",\n          \"details\": \"A trendy neighborhood known for its boutique shops, art galleries, and cobblestone streets.\",\n          \"image_url\": \"https://www.example.com/soho.jpg\",\n          \"coordinates\": [40.7213, -74.0006],\n          \"ticket_pricing\": \"N/A\",\n          \"rating\": 4.2,\n          \"time_spent\": \"3 hours\"\n        },\n        {\n          \"name\": \"Little Italy\",\n          \"details\": \"A vibrant neighborhood with authentic Italian restaurants, bakeries, and shops.\",\n          \"image_url\": \"https://www.example.com/little_italy.jpg\",\n          \"coordinates\": [40.7197, -73.9995],\n          \"ticket_pricing\": \"N/A\",\n          \"rating\": 4.3,\n          \"time_spent\": \"2 hours\"\n        },\n        {\n          \"name\": \"Chinatown\",\n          \"details\": \"A bustling neighborhood with Chinese markets, restaurants, and cultural attractions.\",\n          \"image_url\": \"https://www.example.com/chinatown.jpg\",\n          \"coordinates\": [40.7133, -73.9953],\n          \"ticket_pricing\": \"N/A\",\n          \"rating\": 4.4,\n          \"time_spent\": \"2 hours\"\n        }\n      ],\n      \"best_time_to_visit\": \"Late morning to early afternoon\"\n    }\n  ],\n  \"hotels\": [\n    {\n      \"name\": \"The Jane Hotel\",\n      \"address\": \"113 Jane St, New York, NY 10014\",\n      \"price\": \"$100-$150 (approx.)\",\n      \"image_url\": \"https://www.example.com/the_jane_hotel.jpg\",\n      \"coordinates\": [40.7334, -74.0091],\n      \"rating\": 4,\n      \"description\": \"A historic hotel with a unique and budget-friendly option in the West Village.\"\n    },\n    {\n      \"name\": \"The Pod 51\",\n      \"address\": \"151 E 51st St, New York, NY 10022\",\n      \"price\": \"$120-$180 (approx.)\",\n      \"image_url\": \"https://www.example.com/the_pod_51.jpg\",\n      \"coordinates\": [40.7571, -73.9725],\n      \"rating\": 3.8,\n      \"description\": \"A modern and minimalist hotel near Midtown Manhattan, offering affordable accommodation.\"\n    },\n    {\n      \"name\": \"The Roosevelt Hotel\",\n      \"address\": \"45 E 45th St, New York, NY 10017\",\n      \"price\": \"$150-$250 (approx.)\",\n      \"image_url\": \"https://www.example.com/the_roosevelt_hotel.jpg\",\n      \"coordinates\": [40.7506, -73.9788],\n      \"rating\": 4.1,\n      \"description\": \"A historic and grand hotel in Midtown Manhattan, known for its art deco architecture and convenient location.\"\n    }\n  ]\n}\n```\n\n**How to Use This Format:**\n\n1. **Fill in the placeholders:** Replace \"https://www.example.com/image.jpg\" with actual image URLs. Replace \"coordinates\" with actual latitude and longitude. Update pricing and ratings with accurate data.\n2. **Choose locations:** Customize the itinerary with specific attractions, museums, parks, restaurants, and other experiences that appeal to you and your partner.\n3. **Adjust time spent:**  Estimate how long you'd like to spend at each location. \n4. **Consider transportation:** Plan for how you will get around, whether by public transport, walking, taxi, or bike.\n5. **Look up hotels:**  Use hotel search websites like Booking.com, Expedia, or Kayak to find hotels in your desired location and price range. \n\n**Important Notes:**\n\n* **Research is key:** Use online travel guides, blogs, and forums to find more detailed information about attractions and activities.\n* **Flexibility is essential:** Be prepared to adjust your plans based on weather, crowds, or unforeseen circumstances.\n* **Budget accordingly:** Factor in transportation, food, souvenirs, and entrance fees when determining your overall budget. \n\nRemember, this is just a template to get you started. Customize it to create a unique and unforgettable travel experience! \n"},
          ],
        },
      ],
    });
  